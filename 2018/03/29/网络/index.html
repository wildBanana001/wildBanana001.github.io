<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>网络 | BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="网络 ajax fetch jsonp" />
  
  
  
  
  <meta name="description" content="网络网络基础网络状态码 1xx：信息性状态码 100 Continue: 客户端应用程序向服务器发送一个服务器无法处理或使用的大实体 101 Switching Protocols : 服务器正在根据客户端的指定，将协议切换成Update首部所列的协议  2xx：成功状态码  200 OK：请求已经被服务器正常处理 201 Created：服务器在请求的响应中创建服务器对象 202 Accepte">
<meta name="keywords" content="网络 ajax fetch jsonp">
<meta property="og:type" content="article">
<meta property="og:title" content="网络">
<meta property="og:url" content="http://yoursite.com/2018/03/29/网络/index.html">
<meta property="og:site_name" content="BLOG">
<meta property="og:description" content="网络网络基础网络状态码 1xx：信息性状态码 100 Continue: 客户端应用程序向服务器发送一个服务器无法处理或使用的大实体 101 Switching Protocols : 服务器正在根据客户端的指定，将协议切换成Update首部所列的协议  2xx：成功状态码  200 OK：请求已经被服务器正常处理 201 Created：服务器在请求的响应中创建服务器对象 202 Accepte">
<meta property="og:updated_time" content="2018-04-08T03:12:20.746Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络">
<meta name="twitter:description" content="网络网络基础网络状态码 1xx：信息性状态码 100 Continue: 客户端应用程序向服务器发送一个服务器无法处理或使用的大实体 101 Switching Protocols : 服务器正在根据客户端的指定，将协议切换成Update首部所列的协议  2xx：成功状态码  200 OK：请求已经被服务器正常处理 201 Created：服务器在请求的响应中创建服务器对象 202 Accepte">
  
    <link rel="alternate" href="/atom.xml" title="BLOG" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-网络" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      网络
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/03/29/网络/" class="article-date">
	  <time datetime="2018-03-29T14:59:01.000Z" itemprop="datePublished">2018-03-29</time>
	</a>

      
      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h3><h4 id="网络状态码"><a href="#网络状态码" class="headerlink" title="网络状态码"></a>网络状态码</h4><ul>
<li>1xx：信息性状态码</li>
<li>100 Continue: 客户端应用程序向服务器发送一个服务器无法处理或使用的大实体</li>
<li><p>101 Switching Protocols : 服务器正在根据客户端的指定，将协议切换成Update首部所列的协议</p>
</li>
<li><p>2xx：成功状态码</p>
</li>
<li><strong>200 OK：请求已经被服务器正常处理</strong></li>
<li>201 Created：服务器在请求的响应中创建服务器对象</li>
<li>202 Accepted：请求已接受，但服务器还未对其执行任何动作</li>
<li>203 Not-Authoritative：实体首部包含的信息不是来自于源端服务器，而是来自资源的一份副本</li>
<li><strong>204 Not Content：响应报文中包含若干首部和一个状态行，但没有实体的主体部分</strong></li>
<li>205 Reset Content：重置内容</li>
<li><p><strong>206 Partial Content：表示客户端进行了范围请求，而服务器成功执行了这部分的GET请求</strong></p>
</li>
<li><p>3xx：重定向状态码</p>
</li>
<li>300 Multiple Choices：请求的资源指向多个资源的URL</li>
<li><strong>301 Moved Permanently：永久性重定向 (在请求的URL已被移除时使用)</strong></li>
<li><strong>302 Found：临时性重定向 （客户端使用location首部给出的URL来临时定位定位资源，将来请求仍然使用老的URL)</strong></li>
<li><strong>303 See Other：告知客户端应该使用另一个URL来获取资源</strong></li>
<li><strong>304 Not Modified：资源已找到，但不符合要求</strong></li>
<li>305 Use Proxy：说明必须通过一个代理来访问资源，代理的位置由location首部给出</li>
<li><p><strong>307 Temporary Redirect：临时重定向</strong></p>
</li>
<li><p>4xx：客户端错误状态码</p>
</li>
<li><strong>400 Bad Request：客户端发送了一个错误的请求(一般为语法错误)</strong></li>
<li><strong>401 Unauthorized：发送的请求需要有通过HTTP认证的认证信息</strong></li>
<li>402 Payment Required：这个状体码未使用，但已经被保留，以用作未来只用。</li>
<li><strong>403 Forbidden：不允许访问该资源</strong></li>
<li><strong>404 Not Found：服务器上找不到该资源</strong></li>
<li>405 Method Not Allowed：请求方法对某些特定的资源不允许使用</li>
<li>406 Not Acceptable：无法访问</li>
<li>407 Proxy Authentication：要求对资源进行认证的代理服务器</li>
<li>408 Request Timeout：客户端完成请求所花时间过长，服务器返回这个状态码，并关闭连接</li>
<li>409 Conflict：说明请求可能在资源上引发一些冲突</li>
<li>410 Gone：服务器曾经拥有过次资源</li>
<li>411 Length Required：服务器要求在请求报文中包含Content-Length首部</li>
<li>412 Precondition Failed：客户端发起条件请求，其中一个条件失败</li>
<li>413 Request Entity Too Large：客户端发送的实体主体部分比服务器能够活着希望处理的要长</li>
<li>414 Request URL Too Long：客户端所发送请求中的请求URL比服务器能够或希望处理的要长</li>
<li>415 Unsupported Media Type：服务器无法理解客户端发送内容类型</li>
<li>416 Request Range Not Satisfiable：请求指定资源范围无效或无法满足</li>
<li><p>417 Expectation Failed：服务器无法满足请求期望</p>
</li>
<li><p>5xx：服务器错误状态码</p>
</li>
<li><strong>500 Internal Server Error：服务器端在执行请求时发生错误</strong></li>
<li>501 Not Implemented：服务器不具备完成请求的功能</li>
<li>502 Bad Gateway：服务器作为网关或代理，从上游服务器收到无效响应</li>
<li><strong>503 Service Unavailable：服务器暂时处于超负载或正在停机维护，无法处理请求</strong></li>
<li>504 Gateway Timeout：服务器作为网关或代理，但是没有及时从上游服务器收到请求</li>
<li>505 Http Version Not Supported：服务器不支持请求中所用的 HTTP 协议版本</li>
</ul>
<h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>同源策略: 协议名、域名、端口号 都相同。<br>不同源 的 客户端 脚本 在没有明确授权的情况下，是不能够读写对方的资源的。</p>
<p>协议名：http / https　协议，https 协议 比 http 协议 多了一层 ssl 安全协议层</p>
<p>域名：主域名 / 子域名 –&gt; <code>www.baidu.com</code> / <code>zhidao.baidu.com</code><br>主域名 和 子域名 分为： 一级域名/二级域名/三级域名/ …<br>一级域名 com<br>二级域名 baidu.com</p>
<p>端口号：80 / 8080（一般网页的默认端口号），当网页的端口号是默认端口号的时候，端口号会隐藏</p>
<h3 id="三次握手-amp-四次挥手"><a href="#三次握手-amp-四次挥手" class="headerlink" title="三次握手 &amp; 四次挥手"></a>三次握手 &amp; 四次挥手</h3><p>三次握手：客户端与服务器建立连接</p>
<ol>
<li>客户端发送 SYN 数据包给服务器</li>
<li>服务器回传一个 SYN / ACK 数据包</li>
<li>客户端回传一个 ACK 数据包</li>
</ol>
<p>四次挥手：客户端与服务器断开连接</p>
<ol>
<li>客户端发送 FIN / ACK 数据包给服务器</li>
<li>服务器返回 ACK 报文</li>
<li>服务器与客户端断开连接, 发送 FIN / ACK 报文</li>
<li>客户端返回一个 ACK 报文, 挥手结束</li>
</ol>
<h3 id="URI-amp-URL"><a href="#URI-amp-URL" class="headerlink" title="URI &amp; URL"></a>URI &amp; URL</h3><p>URI：统一资源标识符<br>URL：统一资源定位符，URL 为 URI 的子集</p>
<p>在浏览器输入一个 url 都经历了什么？</p>
<ol>
<li>浏览器通过 DNS 把域名解析成 ip 地址</li>
<li>客户端通过 TCP 协议建立到服务器的 TCP 连接（三次握手）</li>
<li>客户端向服务端发送 HTTP 协议包，请求服务器里面的资源文档</li>
<li>服务器向客户端发送 HTTP 协议应答包</li>
<li>客户端和服务器断开，客户端开始解释处理 HTML 文档</li>
</ol>
<h3 id="HTTP-协议-amp-TCP-IP-协议"><a href="#HTTP-协议-amp-TCP-IP-协议" class="headerlink" title="HTTP 协议 &amp; TCP / IP 协议"></a>HTTP 协议 &amp; TCP / IP 协议</h3><p>HTTP 协议 是 TCP / IP 协议 的子集。</p>
<p>TCP / IP 分层管理的结构是: 应用层、传输层、网络层、数据链路层。</p>
<p>应用层是 HTTP 协议<br>传输层是 TCP 协议<br>网络层是 IP 协议<br>链路层是 网络</p>
<h3 id="请求-amp-响应"><a href="#请求-amp-响应" class="headerlink" title="请求 &amp; 响应"></a>请求 &amp; 响应</h3><p>HTTP 通过 报文 进行通信，报文 分为 请求报文 和 响应报文。</p>
<p>请求报文：</p>
<ol>
<li>请求头：请求方法，请求URL，HTTP协议，版本 （GET/img/logo.gif HTTP/1.1）</li>
<li>请求行：(Accept-Language:en)</li>
<li>空行</li>
<li>请求主体：请求中的内容</li>
</ol>
<p>响应报文：</p>
<ol>
<li>响应头：报文协议，报文版本，状态码，状态描述 (HTTP/1.1 200 OK)</li>
<li>响应行：(content-length:16)</li>
<li>空行</li>
<li>响应主体</li>
</ol>
<p><strong> get ／ post ／ put ／ delete </strong><br>get，post，put，delete：对应这个资源的 查，改，增，删 4 个操作。</p>
<p>get 与 post 的区别？<br>get：<br>资源类型：主动的 或 被动的<br>数据类型：文本<br>数据量：小于255个字符<br>可见性：url 的一部分，在浏览器地址中可见<br>数据缓存：数据在 url 历史缓存中</p>
<p>post：<br>资源类型：主动的<br>数据类型：文本 或 二进制<br>数据量：没有限制<br>可见性：作为 请求主体 发送，用户不可见<br>数据缓存：数据不在 url 历史缓存中</p>
<h3 id="ajax-amp-fetch"><a href="#ajax-amp-fetch" class="headerlink" title="ajax &amp; fetch"></a>ajax &amp; fetch</h3><h4 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h4><p>  ajax不是一种单一的技术，而是有机利用一系列交互式网页应用相关的技术所形成的结合体。<br>  ajax是一种用于创建快速动态网页的技术，通过在后台与服务器进行少量数据交换，ajax可以使网页实现异步更新。意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p>
<h4 id="ajax-优缺点"><a href="#ajax-优缺点" class="headerlink" title="ajax 优缺点"></a>ajax 优缺点</h4><p>ajax 优点:</p>
<ol>
<li>页面无刷新，用户体验好</li>
<li>使用异步的形式与服务器进行通信，响应更快</li>
<li>减少冗余请求，减轻服务器的负担</li>
<li>基于标准化的并被广泛支持的技术，不需要插件或者小程序</li>
</ol>
<p>AJAX缺点:</p>
<ol>
<li>不支持浏览器的后退机制</li>
<li>对搜索引擎支持较弱</li>
<li>无法使用URL直接访问</li>
<li>破坏了程序异常机制</li>
<li>存在一定安全问题</li>
</ol>
<h4 id="ajax包含技术"><a href="#ajax包含技术" class="headerlink" title="ajax包含技术"></a>ajax包含技术</h4><ol>
<li>使用CSS和XHTML表示</li>
<li>使用javascript来绑定和调用</li>
<li>使用DOM模型来交互和动态显示</li>
<li>使用XMLHttpRequest来和服务器进行异步通信</li>
</ol>
<p>XMLHttpRequest目前虽然还没有被W3C所采纳，但它已经是一个事实的标准，因为目前几乎所有的主流浏览器都支持它</p>
<h4 id="ajax-步骤"><a href="#ajax-步骤" class="headerlink" title="ajax 步骤"></a>ajax 步骤</h4><p>通过XMLHttpRequest对象来向服务器发起异步请求，从服务器获取数据，用JavaScript来操作DOM更新页面</p>
<ol>
<li><p>创建 ajax 对象<br>var xml = XMLHttpRequest()  //主流浏览器<br>var xml = ActiveXObject(‘Mircosoft.XMLHTTP’)  //IE5、IE6</p>
</li>
<li><p>创建与服务器的连接和调用<br>xml.open(get/post, url, anync) // 第三个参数是boolean值，默认为true，异步模式</p>
</li>
<li><p>监听对象状态改变<br>xml.onReadyStateChange  //监听对象状态改变<br>xml.readyState == 4     //响应已完成 返回0：请求未初始化; 返回1：请求已建立，但还没发送(send还没调用); 返回2：请求已发送，正在处理(通常现在可以获取到响应头); 返回3.请求正在处理中(通常现在可以获取到响应的部分数据，但服务器还没有完成响应的生成);<br>xml.status == 200       //“OK：请求已经被服务器正常处理”<br>callBack(responseText)  // 若成功，通过回调函数接收 ajax 返回的数据</p>
</li>
<li><p>向服务器发送数据<br>xml.send()<br>使用GET请求：将要提交的参数写到open方法里的url里，send传参为null或空。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xml.open(&quot;GET&quot;, url + &apos;?&apos; + data, flag);</span><br><span class="line">xml.send(null) 或 xml.send()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>使用POST请求：若要像HTML表单那样POST数据，使用setRequestHeader()来添加HTTP头，然后在send()方法里规定希望发送的数据类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xml.open(&quot;POST&quot;, url, flag);</span><br><span class="line">xml.setRequestHeader(&apos;Content-type&apos;, &apos;application/x-www-form-urlencoded&apos;);</span><br><span class="line">xml.send(data);</span><br></pre></td></tr></table></figure></p>
<p>为什么监听要放到发送数据前边？<br>因为若网速非常快，刚刚请求数据，数据就已经返回回来了，但是代码还没有走到监听部分，这就导致了监听部分的失效。</p>
<h4 id="封装-ajax"><a href="#封装-ajax" class="headerlink" title="封装 ajax"></a>封装 ajax</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function Ajax(method, url, flag, data, callback)&#123;</span><br><span class="line">    var xml = null;</span><br><span class="line">    //兼容性</span><br><span class="line">    if(window.XMLHttpRequest) &#123;</span><br><span class="line">        xml = new XMLHttpRequest();</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        xml = new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    //将method值变为大写</span><br><span class="line">    method = method.toUpperCase();</span><br><span class="line">    //判断请求方式</span><br><span class="line">    if(method === &apos;GET&apos;)&#123;</span><br><span class="line">        xml.open(method, url + &apos;?&apos; + data, flag);</span><br><span class="line">        xml.send();</span><br><span class="line">    &#125;else if(method === &apos;POST&apos;)&#123;</span><br><span class="line">        xml.open(method, url, flag);</span><br><span class="line">        xml.setRequestHeader(&apos;Content-type&apos;, &apos;application/x-www-form-urlencoded&apos;);</span><br><span class="line">        xml.send(data);</span><br><span class="line">    &#125;</span><br><span class="line">    //监听</span><br><span class="line">    xml.onreadystatechange = function () &#123;</span><br><span class="line">        if(xml.readyState === 4) &#123;</span><br><span class="line">            if(xml.status === 200) &#123;</span><br><span class="line">                callback(xml.responseText);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                alert(&apos;error&apos;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><p>Fetch API：Fetch 是 XMLHttpRequest 的最新替代技术。<br>Fetch API 提供了一个 fetch() 方法，被定义在 BOM 的 window 对象中。<br>Fetch 方法返回的是一个 Promise 对象，让你能够对 请求 的 返回结果 进行检索。</p>
<h4 id="Fetch-的优点："><a href="#Fetch-的优点：" class="headerlink" title="Fetch 的优点："></a>Fetch 的优点：</h4><ol>
<li>语法简洁，更加语义化</li>
<li>基于标准 Promise 实现，可以链式调用，支持 async/await</li>
</ol>
<h4 id="Fetch-的使用："><a href="#Fetch-的使用：" class="headerlink" title="Fetch 的使用："></a>Fetch 的使用：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(url).then(function (res) &#123; // 需要同源策略</span><br><span class="line">    return res.json();</span><br><span class="line">&#125;).then(function (data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;).catch(function (err) &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p>跨域的方法</p>
<ol>
<li>flash</li>
<li>服务器代理中转 // 将资源放在服务器上</li>
<li>iframe + document.domain // 主域名相同，子域名不同，在子页面 与 主页面 分别加上 document.domain</li>
<li>iframe + location.hash // 用 location.hash 值传递数据，将数据放到 url 里</li>
<li>iframe + window.name // 修改子页面的 window.name 让主页面获取到这个值</li>
<li>postMessage // 使用 iframe.contentWindow.postMessage 发送数据，在子页面绑定 message 事件接收数据</li>
<li>jsonp // script 标签 src 属性 不受同源策略限制</li>
<li>cors // 跨域资源共享，需要 浏览器 与 服务器 同时支持</li>
</ol>
<p>后面两种现在比较常用！</p>
<h3 id="jsonp-amp-jsonp-原理"><a href="#jsonp-amp-jsonp-原理" class="headerlink" title="jsonp &amp; jsonp 原理"></a>jsonp &amp; jsonp 原理</h3><p>什么是 jsonp：web 页面上 script 标签的 src 属性引入 js 文件不受跨域的影响，把资源直接放到 script 标签的 src 里面，相当于把 数据 以 json 的形式放到服务器上。无法监控 script 的 src 的加载状态，不知道数据有没有获取完成，所以我们要事先定义好处理函数，这个处理函数就是 jsonp。</p>
<p>jsonp 的工作原理：script 标签的 src 向服务器发送了一个 GET 请求，同时 将约定好 的参数写到 url 上面。同源策略 只限制客户端，服务器端没有这个限制，因此服务器端 接收到 这个请求之后会 响应它。根据 url 上面的 参数 自动生成一串 json 数据 并且 格式化，然后返回到 发送请求 的页面上。script 标签获取到这个 字符串 之后 自动转化成 js 对象，然后执行这一段代码。</p>
<h4 id="jsonp-优缺点"><a href="#jsonp-优缺点" class="headerlink" title="jsonp 优缺点"></a>jsonp 优缺点</h4><p>jsonp 优点：</p>
<ol>
<li>JSONP 可以跨越同源策略</li>
<li>兼容性好</li>
<li>可以定义 callback 处理函数，处理函数交给了调用方</li>
</ol>
<p>jsonp 缺点：</p>
<ol>
<li>只支持 GET 请求而不支持 POST 请求</li>
<li>调用失败的时候不会返回各种 HTTP 状态码</li>
<li>安全性不高</li>
</ol>
<h4 id="封装-jsonp"><a href="#封装-jsonp" class="headerlink" title="封装 jsonp"></a>封装 jsonp</h4><p>我们自己封装的简单 jsonp：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">function jsonp (url,symbol,callback,jsonpCallBack) &#123; // symbol 一般为 &amp; 或者 ？</span><br><span class="line">    // 最后面的两个参数一般是和后台人员协商好的，回掉函数名称（一般为 cb 或 callback） 与 定义的回掉函数名字（我们定义的处理函数）</span><br><span class="line">    var script = document.createElement(&apos;script&apos;);</span><br><span class="line">    script.src = url + symbol + callback + &apos;=&apos; + jsonpCallBack;</span><br><span class="line">    document.body.appendChild(script);</span><br><span class="line">    document.body.removeChild(script);</span><br><span class="line">&#125;</span><br><span class="line">function doJsonp (data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;</span><br><span class="line">jsonp(&apos;http://suggestion.baidu.com/su?wd=jsonp&apos;,&apos;&amp;&apos;,&apos;cb&apos;,&apos;doJsonp&apos;);</span><br><span class="line">jsonp 百度搜索框</span><br><span class="line">百度搜索框：</span><br><span class="line"></span><br><span class="line">// html</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;input&quot; placeholder=&quot;请输入内容&quot;&gt;</span><br><span class="line">&lt;ul id=&quot;ul&quot;&gt;&lt;/ul&gt;</span><br><span class="line">// js</span><br><span class="line">var input = document.getElementById(&apos;input&apos;);</span><br><span class="line">var ul = document.getElementById(&apos;ul&apos;);</span><br><span class="line">input.onkeyup = function (e) &#123;</span><br><span class="line">    jsonp(&apos;http://suggestion.baidu.com/su?wd=&apos;,this.value,&apos;&amp;&apos;,&apos;cb&apos;,&apos;doJsonp&apos;);</span><br><span class="line">&#125;</span><br><span class="line">function jsonp (url,value,symbol,callback,jsonpCallBack) &#123; </span><br><span class="line">    var script = document.createElement(&apos;script&apos;);</span><br><span class="line">    script.src = url + value + symbol + callback + &apos;=&apos; + jsonpCallBack;</span><br><span class="line">    document.body.appendChild(script);</span><br><span class="line">    document.body.removeChild(script);</span><br><span class="line">&#125;</span><br><span class="line">function doJsonp (data) &#123;</span><br><span class="line">    var data = data.s;</span><br><span class="line">    var html = &apos;&apos;;</span><br><span class="line">    for(var i = 0 ; i &lt; data.length ; i++) &#123;</span><br><span class="line">        html += &apos;&lt;li&gt;&apos;;</span><br><span class="line">        html += &apos;&lt;a href=&quot;https://www.baidu.com/s?wd=&apos; + data[i] + &apos;&quot; target=&quot;_blank&quot;&gt;&apos;;</span><br><span class="line">        html += data[i];</span><br><span class="line">        html += &apos;&lt;/a&gt;&apos;;</span><br><span class="line">        html += &apos;&lt;/li&gt;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">    ul.innerHTML = html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="cors-跨域资源共享"><a href="#cors-跨域资源共享" class="headerlink" title="cors 跨域资源共享"></a>cors 跨域资源共享</h3><p>cors 与 jsonp 相比的优点：<br>JSONP 只支持 GET 请求，CORS 支持所有类型的 HTTP 请求（get／post／put／delete）</p>
<h4 id="使用-cors："><a href="#使用-cors：" class="headerlink" title="使用 cors："></a>使用 cors：</h4><ol>
<li>在请求头中，添加 Origin 字段。<br>Origin 字段用来说明，请求来自哪个源（协议 + 域名 + 端口）。<br>服务器根据这个值，决定是否同意这次请求。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Origin: https://wildbanana001.github.io/</span><br></pre></td></tr></table></figure>
<ol>
<li>在响应头中，服务器会返回 Access-Control-Allow-Origin 字段。<br>Access-Control-Allow-Origin 字段的值,要么是 Origin 的值，要么是 *（接受 任意 域名 的请求），表示接受这个域名的请求。<br>要是没有返回 Access-Control-Allow-Origin 字段，则代表出错了。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. Access-Control-Allow-Origin: https://wildbanana001.github.io/</span><br><span class="line">2. Access-Control-Allow-Origin: *</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>

<script src="/js/vdonate.js"></script>
<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/WeChanQR.png',
  alipayImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/AliPayQR.jpg'
});
</script>
      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络-ajax-fetch-jsonp/">网络 ajax fetch jsonp</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/03/23/postjavascript的prototype及继承/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">prototype及继承</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#网络"><span class="nav-number">1.</span> <span class="nav-text">网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络基础"><span class="nav-number">1.1.</span> <span class="nav-text">网络基础</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络状态码"><span class="nav-number">1.1.1.</span> <span class="nav-text">网络状态码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#同源策略"><span class="nav-number">1.2.</span> <span class="nav-text">同源策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三次握手-amp-四次挥手"><span class="nav-number">1.3.</span> <span class="nav-text">三次握手 &amp; 四次挥手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URI-amp-URL"><span class="nav-number">1.4.</span> <span class="nav-text">URI &amp; URL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-协议-amp-TCP-IP-协议"><span class="nav-number">1.5.</span> <span class="nav-text">HTTP 协议 &amp; TCP / IP 协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#请求-amp-响应"><span class="nav-number">1.6.</span> <span class="nav-text">请求 &amp; 响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax-amp-fetch"><span class="nav-number">1.7.</span> <span class="nav-text">ajax &amp; fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ajax"><span class="nav-number">1.7.1.</span> <span class="nav-text">ajax</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ajax-优缺点"><span class="nav-number">1.7.2.</span> <span class="nav-text">ajax 优缺点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ajax包含技术"><span class="nav-number">1.7.3.</span> <span class="nav-text">ajax包含技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ajax-步骤"><span class="nav-number">1.7.4.</span> <span class="nav-text">ajax 步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#封装-ajax"><span class="nav-number">1.7.5.</span> <span class="nav-text">封装 ajax</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fetch"><span class="nav-number">1.8.</span> <span class="nav-text">fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Fetch-的优点："><span class="nav-number">1.8.1.</span> <span class="nav-text">Fetch 的优点：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Fetch-的使用："><span class="nav-number">1.8.2.</span> <span class="nav-text">Fetch 的使用：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#跨域"><span class="nav-number">1.9.</span> <span class="nav-text">跨域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonp-amp-jsonp-原理"><span class="nav-number">1.10.</span> <span class="nav-text">jsonp &amp; jsonp 原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#jsonp-优缺点"><span class="nav-number">1.10.1.</span> <span class="nav-text">jsonp 优缺点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#封装-jsonp"><span class="nav-number">1.10.2.</span> <span class="nav-text">封装 jsonp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cors-跨域资源共享"><span class="nav-number">1.11.</span> <span class="nav-text">cors 跨域资源共享</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-cors："><span class="nav-number">1.11.1.</span> <span class="nav-text">使用 cors：</span></a></li></ol></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2018 BLOG All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>








	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            BLOG
          </div>
          <div class="panel-body">
            Copyright © 2018 林凯锋 All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>